"use strict";(self.webpackChunkapp_for_start=self.webpackChunkapp_for_start||[]).push([[218],{218:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(950),o=n(74);const s=function(e,t){const n=(0,i.useRef)(null);return(0,i.useCallback)((function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{e(...o)}),t)}),[e,t])};var r=n(414);const l=e=>{let{items:t,containerHeight:n}=e;const[l,a]=(0,i.useState)(null),c=(0,i.useMemo)((()=>t[t.length-1]),[t]),u=(0,i.useCallback)((()=>{const e=t.filter((e=>window.scrollY-1e3<=e.top&&window.scrollY+n+1e3>=e.top));a(e)}),[t,n]),d=s(u,100);return(0,i.useEffect)((()=>{d()}),[d]),(0,i.useEffect)((()=>(window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)})),[d]),(0,r.jsx)("div",{style:{minHeight:(null===c||void 0===c?void 0:c.top)||0},children:l&&l.map((e=>{let{width:t,height:n,top:i,left:s,id:l,url:a}=e;return(0,r.jsx)(o.N_,{to:`/info/${l}`,children:(0,r.jsx)("img",{loading:"lazy",className:"gallery-container-masonry-grid-item",src:a,alt:`Image ${l}`,style:{position:"absolute",width:t,height:n,left:s,top:i}})},l)}))})},a=e=>e<576?"xs":e>=576&&e<768?"sm":e>=768&&e<992?"md":e>=992&&e<1200?"lg":"xl",c=()=>{const[e,t]=(0,i.useState)(a(window.innerWidth));return(0,i.useEffect)((()=>{const e=()=>{t(a(window.innerWidth))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e};const u=function(){const[e,t]=(0,i.useState)(window.innerWidth);return(0,i.useEffect)((()=>{const e=()=>{t(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e},d={xs:{columnCount:1,columnGap:10,rowGap:10,itemWidth:300},sm:{columnCount:2,columnGap:10,rowGap:10,itemWidth:250},md:{columnCount:3,columnGap:10,rowGap:10,itemWidth:200},lg:{columnCount:4,columnGap:10,rowGap:10,itemWidth:200},xl:{columnCount:5,columnGap:10,rowGap:10,itemWidth:200}},m=e=>{let{images:t}=e;const n=u(),o=c(),[s,a]=(0,i.useState)([]);return(0,i.useEffect)((()=>{const e=(e=>{let{images:t,itemWidth:n,columnCount:i,columnGap:o,width:s,rowGap:r}=e;const l=t.map((e=>n/e.width*e.height)),a=[],c=Array(i).fill(0),u=(s-(i-1)*o)/i;return t.forEach(((e,t)=>{const s=t%i,d=l[t],m=c[s],h=s*(u+o);c[s]+=d+r,a.push({...e,width:n,height:d,top:m,left:h})})),a})({width:n,images:t,...d[o]});a(e)}),[t,n,o]),(0,r.jsx)("div",{className:"gallery-container",children:(0,r.jsx)("div",{className:"gallery-container-masonry-grid",children:(0,r.jsx)(l,{containerHeight:2e3,items:s})})})},h=()=>{const[e,t]=(0,i.useState)([]),[n,o]=(0,i.useState)(1),l=(0,i.useCallback)((async e=>{const n=await(async e=>{const t=await fetch(`https://api.unsplash.com/photos?per_page=30&page=${e}`,{headers:{Authorization:"Client-ID GsqKDkzONk9n2i0XgL1WoI59s81v06tHz847n2jso8o"}});return(await t.json()).map((e=>({url:e.urls.small,id:e.id,width:e.width,height:e.height})))})(e);t((e=>[...e,...n]))}),[]),a=s(l,500);return(0,i.useEffect)((()=>{const e=()=>{document.documentElement.scrollHeight>window.innerHeight&&window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight&&o((e=>e+1))};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),(0,i.useEffect)((()=>{a(n)}),[a,n]),(0,r.jsx)(m,{images:e})}}}]);